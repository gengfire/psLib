!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(this,function(){return function(e){function t(n){if(r[n])return r[n].exports;var a=r[n]={exports:{},id:n,loaded:!1};return e[n].call(a.exports,a,a.exports,t),a.loaded=!0,a.exports}var r={};return t.m=e,t.c=r,t.p="",t(0)}([function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.imgData2Base64=t.getImageData=t.psLib=void 0;var a=r(1),o=n(a),i=r(2),u=n(i),s=r(6),c=r(31),f=r(32),v=r(33),l=function(){function e(t){o["default"](this,e),this.imageData=t}return u["default"](e,[{key:"fix",value:function(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;t>n;n++)r[n-1]=arguments[n];return this.imageData=s.fix.apply(void 0,[this.imageData,e].concat(r)),this}},{key:"ps",value:function(e){return this.imageData=f.ps(this.imageData,e),this}},{key:"cover",value:function(e,t){for(var r=arguments.length,n=Array(r>2?r-2:0),a=2;r>a;a++)n[a-2]=arguments[a];return this.imageData=c.cover.apply(void 0,[this.imageData,e,t].concat(n)),this}},{key:"clone",value:function(){return v.clone(this.imageData)}},{key:"export",value:function(){return this.imageData}}]),e}(),d=function(e){return this instanceof l?l:new l(e)};window.psLib=d,window.getImageData=v.getImageData,window.imgData2Base64=v.imgData2Base64,t.psLib=d,t.getImageData=v.getImageData,t.imgData2Base64=v.imgData2Base64},function(e,t){"use strict";t.__esModule=!0,t["default"]=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(3),o=n(a);t["default"]=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),o["default"](e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}()},function(e,t,r){e.exports={"default":r(4),__esModule:!0}},function(e,t,r){var n=r(5);e.exports=function(e,t,r){return n.setDesc(e,t,r)}},function(e,t){var r=Object;e.exports={create:r.create,getProto:r.getPrototypeOf,isEnum:{}.propertyIsEnumerable,getDesc:r.getOwnPropertyDescriptor,setDesc:r.defineProperty,setDescs:r.defineProperties,getKeys:r.keys,getNames:r.getOwnPropertyNames,getSymbols:r.getOwnPropertySymbols,each:[].forEach}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fix=void 0;var n=r(7),a=r(25);t.fix=function(e,t){for(var r=arguments.length,o=Array(r>2?r-2:0),i=2;r>i;i++)o[i-2]=arguments[i];switch(t){case"查找边缘":case"borderline":return n.borderline.apply(void 0,[e].concat(o));case"腐蚀":case"corrode":return n.corrode.apply(void 0,[e].concat(o));case"暗角":case"darkCorner":return n.darkCorner.apply(void 0,[e].concat(o));case"喷点":case"dotted":return n.dotted.apply(void 0,[e].concat(o));case"浮雕效果":case"embossment":return n.embossment.apply(void 0,[e].concat(o));case"高斯模糊":case"gaussBlur":return n.gaussBlur.apply(void 0,[e].concat(o));case"灰度扩展":case"ImageEnhance":return n.ImageEnhance.apply(void 0,[e].concat(o));case"马赛克":case"mosaic":return n.mosaic.apply(void 0,[e].concat(o));case"添加杂色":case"noise":return n.noise.apply(void 0,[e].concat(o));case"油画":case"oilPainting":return n.oilPainting.apply(void 0,[e].concat(o));case"色调分离":case"posterize":return n.posterize.apply(void 0,[e].concat(o));case"棕褐色":case"sepia":return n.sepia.apply(void 0,[e].concat(o));case"锐化":case"sharp":return n.sharp.apply(void 0,[e].concat(o));case"灰度处理":case"toGray":return n.toGray.apply(void 0,[e].concat(o));case"反色":case"toReverse":return n.toReverse.apply(void 0,[e].concat(o));case"灰度阈值":case"toThresh":return n.toThresh.apply(void 0,[e].concat(o));case"亮度":case"brightness":return a.brightness.apply(void 0,[e].concat(o));case"曲线":case"curve":return a.curve.apply(void 0,[e].concat(o));case"伽马":case"gamma":return a.gamma.apply(void 0,[e].concat(o));case"可选颜色":case"selectiveColor":return a.selectiveColor.apply(void 0,[e].concat(o));case"色相饱和度":case"setHSI":return a.setHSI.apply(void 0,[e].concat(o));default:throw t+". 该处理方法不存在"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(8);Object.defineProperty(t,"borderline",{enumerable:!0,get:function(){return n.borderline}});var a=r(10);Object.defineProperty(t,"corrode",{enumerable:!0,get:function(){return a.corrode}});var o=r(11);Object.defineProperty(t,"darkCorner",{enumerable:!0,get:function(){return o.darkCorner}});var i=r(12);Object.defineProperty(t,"dotted",{enumerable:!0,get:function(){return i.dotted}});var u=r(13);Object.defineProperty(t,"embossment",{enumerable:!0,get:function(){return u.embossment}});var s=r(14);Object.defineProperty(t,"gaussBlur",{enumerable:!0,get:function(){return s.gaussBlur}});var c=r(15);Object.defineProperty(t,"ImageEnhance",{enumerable:!0,get:function(){return c.ImageEnhance}});var f=r(16);Object.defineProperty(t,"mosaic",{enumerable:!0,get:function(){return f.mosaic}});var v=r(17);Object.defineProperty(t,"noise",{enumerable:!0,get:function(){return v.noise}});var l=r(18);Object.defineProperty(t,"oilPainting",{enumerable:!0,get:function(){return l.oilPainting}});var d=r(19);Object.defineProperty(t,"posterize",{enumerable:!0,get:function(){return d.posterize}});var h=r(20);Object.defineProperty(t,"sepia",{enumerable:!0,get:function(){return h.sepia}});var g=r(21);Object.defineProperty(t,"sharp",{enumerable:!0,get:function(){return g.sharp}});var p=r(22);Object.defineProperty(t,"toGray",{enumerable:!0,get:function(){return p.toGray}});var m=r(23);Object.defineProperty(t,"toReverse",{enumerable:!0,get:function(){return m.toReverse}});var y=r(24);Object.defineProperty(t,"toThresh",{enumerable:!0,get:function(){return y.toThresh}})},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.borderline=void 0;var n=r(9);t.borderline=function(e){var t=[0,1,0,1,-4,1,0,1,0];return n.dorsyMath.applyMatrix(e,t,250)}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r={FFT1:function(e){function t(){o++;for(var e=a/Math.pow(2,o),r=a/e,i=0;e>i;i++)n(i*r,(i+1)*r-1,o);e>1&&t()}function n(t,n,o){for(var u=Math.pow(2,o-1),s=t,c=0;n-u>=s;s++){var f=s+u,v=c*a/Math.pow(2,o),l=v+a/4;e[s]instanceof r.C||(e[s]=new r.C(e[s])),e[f]instanceof r.C||(e[f]=new r.C(e[f]));var d=e[s].plus(e[f].mutiply(i[v])),h=e[s].plus(e[f].mutiply(i[l]));e[s]=d,e[f]=h,c++}}for(var a=e.length,o=0,i=[],u=0;a>u;u++)i[u]=this.exp(-2*Math.PI*u/a);return t(),e},DFT:function(){},Matrix:function(e,t,r){var n=[];if(t){var a=0,o=0;if(isNaN(t)?(a=/(\d+)\s*\*/.exec(t)[1],o=/\*\s*(\d+)/.exec(t)[1]):(a=t,o=r),e[0]&&e[0][0])for(var i=0;a>i;i++){n[i]=[];for(var u=0;o>u;u++)n[i][u]=e[i][u]||0}else for(var s=0;a>s;s++){n[s]=[];for(var c=0;o>c;c++){n[s][c]=e[s*o+c]||0}}this.m=a,this.n=o}else this.m=e.length,this.n=e[0].length;this.data=n},C:function(e,t){this.r=e||0,this.i=t||0},exp:function(e,t){e=e||0,t=t||1;var n=new r.C;return n.r=t*Math.cos(e),n.i=t*Math.sin(e),n},lagrange:function(e,t){function r(t,r){for(var a=1,o=1,i=0;n>i;i++)i!=r&&(a*=e[r]-e[i],o*=t-e[i]);var u=o/a;return u}var n=e.length,a=function(e){for(var a=0,o=0;n>o;o++){var i=r(e,o);a+=t[o]*i}return a};return a},applyMatrix:function(e,t,n){n=n||0;for(var a=e.data,o=e.width,i=(e.height,t.length),u=new r.Matrix(t,i,1),s=[],c=-(Math.sqrt(i)-1)/2,f=0,v=a.length;v>f;f+=4){var l=f/4,d=parseInt(l/o),h=l%o;if(0!=d&&0!=h){for(var g=[[],[],[]],p=c;-c>=p;p++)for(var m=d+p,y=c;-c>=y;y++)for(var b=h+y,M=4*(m*o+b),x=0;3>x;x++){var w=M+x;g[x].push(a[w])}for(var _=new r.Matrix(g,3,i),P=_.mutiply(u),I=0;3>I;I++)s[f+I]=P.data[I];s[f+4]=a[f+4]}}for(var O=0,j=a.length;j>O;O++)s[O]&&(a[O]=s[O]<n?s[O]:a[O]);return e},RGBToHSI:function(e,t,r){var n=(e-t+e-r)/2/Math.sqrt((e-t)*(e-t)+(e-r)*(t-r))||0;n=Math.acos(n);var a=r>t?2*Math.PI-n:n,o=0;o=e+t+r>0?1-3*Math.min(e,t,r)/(e+t+r):0;var i=(e+t+r)/3;return a>2*Math.PI&&(a=2*Math.PI),0>a&&(a=0),{H:a,S:o,I:i}},HSIToRGB:function(e,t,r){0>e?(e%=2*Math.PI,e+=2*Math.PI):e%=2*Math.PI;var n=0,a=0,o=0;return e<=2*Math.PI/3?(o=r*(1-t),n=r*(1+t*Math.cos(e)/Math.cos(Math.PI/3-e)),a=3*r-(n+o)):e<=4*Math.PI/3?(e-=2*Math.PI/3,n=r*(1-t),a=r*(1+t*Math.cos(e)/Math.cos(Math.PI/3-e)),o=3*r-(a+n)):(e-=4*Math.PI/3,a=r*(1-t),o=r*(1+t*Math.cos(e)/Math.cos(Math.PI/3-e)),n=3*r-(a+o)),{R:n,G:a,B:o}},applyInHSI:function(e,t){for(var r=["R","Y","G","C","B","M"],n=e.data,a=Math.PI/6,o=Math.PI/3,i=0,u=n.length;u>i;i+=4){var s=this.RGBToHSI(n[i],n[i+1],n[i+2]),c=s.H+a,f=~~(c/o),v=r[f%6];t(s,v,n[i+3]),s.S>1&&(s.S=1),s.S<0&&(s.S=0);var l=this.HSIToRGB(s.H,s.S,s.I);n[i]=l.R,n[i+1]=l.G,n[i+2]=l.B}},applyInCoordinate:function(e,t){},distance:function(e,t){t=t||[0,0],e=new r.C(e[0],e[1]),t=new r.C(t[0],t[1]);var n=e.minus(t);return n.distance()},xyToIFun:function(e){return function(t,r,n){return n=n||0,4*(r*e+t)+n}},xyCal:function(e,t,r,n,a){var o=this.xyToIFun(e.width),i=o(t,r,0),u=e.data,s=n(u[i],u[i+1],u[i+2]);s&&(u[i]=s[0],u[i+1]=s[1],u[i+2]=s[2]),a&&(u[i+3]=a(u[i+3]))}};r.Matrix.prototype={plus:function(e){if(this.m!=e.m||this.n!=e.n)throw new Error("矩阵加法行列不匹配");for(var t=new r.Matrix([],this.m,this.n),n=0;n<this.m;n++)for(var a=0;a<this.n;a++)t.data[n][a]=this.data[n][a]+e.data[n][a];return t},minus:function(e){if(this.m!=e.m||this.n!=e.n)throw new Error("矩阵减法法行列不匹配");for(var t=new r.Matrix([],this.m,this.n),n=0;n<this.m;n++)for(var a=0;a<this.n;a++)t.data[n][a]=this.data[n][a]-e.data[n][a];return t},mutiply:function(e){if(this.n!=e.m)throw new Error("矩阵乘法行列不匹配");for(var t=new r.Matrix([],this.m,e.n),n=0;n<this.m;n++)for(var a=0;a<e.n;a++){for(var o=0,i=0;i<this.n;i++)o+=this.data[n][i]*e.data[i][a];t.data[n][a]=o}return t}},r.C.prototype={plus:function(e){var t=new r.C;return t.r=this.r+e.r,t.i=this.i+e.i,t},minus:function(e){var t=new r.C;return t.r=this.r-e.r,t.i=this.i-e.i,t},mutiply:function(e){var t=new r.C;return t.r=this.r*e.r-this.i*e.i,t.i=this.r*e.i+this.i*e.r,t},divide:function(e){var t=new r.C,n=e.mutiply(e.conjugated()),a=this.mutiply(e.conjugated());return t.r=a.r/n.r,t.i=a.i/n.r,t},conjugated:function(){var e=new r.C(this.r,-this.i);return e},distance:function(){return Math.sqrt(this.r*this.r+this.i*this.i)}},t.dorsyMath=r},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.corrode=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=e.data,n=e.width,a=e.height,o=0;n>o;o++)for(var i=0;a>i;i++)for(var u=parseInt(Math.random()*t*2)-t,s=parseInt(Math.random()*t*2)-t,c=i*n+o,f=(i+u)*n+o+s,v=0;3>v;v++)r[4*c+v]=r[4*f+v];return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.darkCorner=void 0;var n=r(9);t.darkCorner=function(e){function t(e,t,r){var o=n.dorsyMath.distance([e,t],[s,c]),i=(o-v)/(f-v);return 0>i&&(i=0),l(i,0,.02,.3,1)*r*a/255}for(var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,o=(arguments.length>3&&void 0!==arguments[3]?arguments[3]:"round",e.data),i=e.width,u=e.height,s=2*i/3,c=1*u/2,f=n.dorsyMath.distance([s,c]),v=f*(1-r/10),l=function(e,t,r,n,a){return t*Math.pow(1-e,3)+3*r*e*Math.pow(1-e,2)+3*n*e*e*(1-e)+a*Math.pow(e,3)},d=0;i>d;d++)for(var h=0;u>h;h++)for(var g=h*i+d,p=0;3>p;p++){var m=t(d,h,o[4*g+p]);o[4*g+p]-=m}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dotted=void 0;var n=r(9);t.dotted=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=e.data,o=e.width,i=e.height,u=2*t+1,s=[],c=r*r,f=-t;t>f;f++)for(var v=-t;t>v;v++)f*f+v*v>c&&s.push([f,v]);for(var l=n.dorsyMath.xyToIFun(o),d=0,h=parseInt(o/u);h>d;d++)for(var g=0,p=parseInt(i/u);p>g;g++)for(var m=parseInt((d+.5)*u),y=parseInt((g+.5)*u),b=0;b<s.length;b++){var M=m+s[b][0],x=y+s[b][1];a[l(M,x,3)]=225,a[l(M,x,2)]=225,a[l(M,x,0)]=225,a[l(M,x,1)]=225}return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.embossment=function(e){for(var t=e.data,r=e.width,n=[],a=0,o=t.length;o>a;a+=4){var i=a/4,u=parseInt(i/r),s=i%r,c=4*((u-1)*r+(s-1)),f=(u+1)*r*4+4*(s+1);if(0!=u&&0!=s){for(var v=0;3>v;v++)n[a+v]=t[c+v]-t[f+v]+127.5;n[a+4]=t[a+4]}}for(var l=0,d=t.length;d>l;l++)t[l]=n[l]||t[l];return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.gaussBlur=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e.data,a=e.width,o=e.height,i=[],u=0,s=void 0,c=void 0,f=void 0,v=void 0,l=void 0,d=void 0,h=void 0,g=void 0,p=void 0,m=void 0;for(d=1/(Math.sqrt(2*Math.PI)*r),l=-1/(2*r*r),h=0,s=-t;t>=s;s++,h++)v=d*Math.exp(l*s*s),i[h]=v,u+=v;for(h=0,m=i.length;m>h;h++)i[h]/=u;for(c=0;o>c;c++)for(s=0;a>s;s++){for(f=v=l=d=0,u=0,g=-t;t>=g;g++)p=s+g,p>=0&&a>p&&(h=4*(c*a+p),f+=n[h]*i[g+t],v+=n[h+1]*i[g+t],l+=n[h+2]*i[g+t],u+=i[g+t]);h=4*(c*a+s),n[h]=f/u,n[h+1]=v/u,n[h+2]=l/u}for(s=0;a>s;s++)for(c=0;o>c;c++){for(f=v=l=d=0,u=0,g=-t;t>=g;g++)p=c+g,p>=0&&o>p&&(h=4*(p*a+s),f+=n[h]*i[g+t],v+=n[h+1]*i[g+t],l+=n[h+2]*i[g+t],u+=i[g+t]);h=4*(c*a+s),n[h]=f/u,n[h+1]=v/u,n[h+2]=l/u}return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ImageEnhance=function(e,t,r){for(var n=e.data,a=0,o=n.length;o>a;a+=4);return e.data=n,e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.mosaic=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3,r=e.data,n=e.width,a=e.height,o=2*t+1,i=0,u=parseInt(n/o);u>i;i++)for(var s=0,c=parseInt(a/o);c>s;s++){for(var f=[],v=[0,0,0],l=0;o>l;l++)for(var d=0;o>d;d++){var h=(s*o+l)*n+i*o+d;v[0]+=r[4*h],v[1]+=r[4*h+1],v[2]+=r[4*h+2]}f[0]=v[0]/(o*o),f[1]=v[1]/(o*o),f[2]=v[2]/(o*o);for(var g=0;o>g;g++)for(var p=0;o>p;p++){var m=(s*o+g)*n+i*o+p;r[4*m]=f[0],r[4*m+1]=f[1],r[4*m+2]=f[2]}}return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.noise=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,r=e.data,n=e.width,a=e.height,o=0;n>o;o++)for(var i=0;a>i;i++)for(var u=i*n+o,s=0;3>s;s++){var c=parseInt(Math.random()*t*2)-t;r[4*u+s]+=c}return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.oilPainting=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,r=e.data,n=e.width,a=e.height,o=0;n>o;o++)for(var i=0;a>i;i++){for(var u=i*n+o,s=0,c=0;3>c;c++)s+=r[4*u+c];s/=3;for(var f=parseInt(s/t)*t,v=0;3>v;v++)r[4*u+v]=f}return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.posterize=void 0;var n=r(9);t.posterize=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,r=(e.data,e.width),a=e.height;t=1>t?1:t>255?255:t;for(var o=Math.floor(255/t),i=0;r>i;i++)for(var u=0;a>u;u++)n.dorsyMath.xyCal(e,i,u,function(e,t,r){return[Math.floor(e/o)*o,Math.floor(t/o)*o,Math.floor(r/o)*o]});return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sepia=void 0;var n=r(9);t.sepia=function(e){for(var t=e.width,r=e.height,a=0;t>a;a++)for(var o=0;r>o;o++)n.dorsyMath.xyCal(e,a,o,function(e,t,r){return[.393*e+.769*t+.189*r,.349*e+.686*t+.168*r,.272*e+.534*t+.131*r]});return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.sharp=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6,r=e.data,n=e.width,a=0,o=r.length;o>a;a+=4){var i=a/4,u=parseInt(i/n),s=i%n;if(0!=u&&0!=s)for(var c=4*((u-1)*n+(s-1)),f=4*((u-1)*n+s),v=4*(i-1),l=0;3>l;l++){var d=r[a+l]-(r[f+l]+r[v+l]+r[c+l])/3;r[a+l]+=d*t}}return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toGray=function(e){for(var t=e.data,r=0,n=t.length;n>r;r+=4){var a=parseInt(.299*t[r]+.578*t[r+1]+.114*t[r+2]);t[r+2]=t[r+1]=t[r]=a}return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toReverse=function(e){for(var t=e.data,r=0,n=t.length;n>r;r+=4)t[r]=255-t[r],t[r+1]=255-t[r+1],t[r+2]=255-t[r+2];return e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.toThresh=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:128,r=e.data,n=0,a=r.length;a>n;n+=4){var o=parseInt(.299*r[n]+.578*r[n+1]+.114*r[n+2]);r[n+2]=r[n+1]=r[n]=o}for(var i=0,u=r.length;u>i;i++)(i+1)%4&&(r[i]=r[i]>t?255:0);return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(26);Object.defineProperty(t,"brightness",{enumerable:!0,get:function(){return n.brightness}});var a=r(27);Object.defineProperty(t,"curve",{enumerable:!0,get:function(){return a.curve}});var o=r(28);Object.defineProperty(t,"gamma",{enumerable:!0,get:function(){return o.gamma}});var i=r(29);Object.defineProperty(t,"selectiveColor",{enumerable:!0,get:function(){return i.selectiveColor}});var u=r(30);Object.defineProperty(t,"setHSI",{enumerable:!0,get:function(){return u.setHSI}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.brightness=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=e.data,a=t/100,o=r/100,i=Math.tan((45+44*o)*Math.PI/180),u=0,s=n.length;s>u;u+=4)for(var c=0;3>c;c++)n[u+c]=(n[u+c]-127.5*(1-a))*i+127.5*(1+a);return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.curve=void 0;var n=r(9);t.curve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,190,255],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[0,229,255],a=arguments[3],o=n.dorsyMath.lagrange(t,r),i=e.data,u=e.width,s=e.height;/[RGB]+/.test(a)||(a="RGB");for(var c=a.replace("R","0").replace("G","1").replace("B","2"),f=[c.indexOf("0")>-1,c.indexOf("1")>-1,c.indexOf("2")>-1],v=0;u>v;v++)for(var l=0;s>l;l++)for(var d=l*u+v,h=0;3>h;h++)f[h]&&(i[4*d+h]=o(i[4*d+h]));return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.gamma=void 0;var n=r(9);t.gamma=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=e.width,a=e.height,o=(t+100)/200*2,i=0;r>i;i++)for(var u=0;a>u;u++)n.dorsyMath.xyCal(e,i,u,function(e,t,r){return[Math.pow(e,o),Math.pow(t,o),Math.pow(r,o)]});return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.selectiveColor=void 0;var n=r(9);t.selectiveColor=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"中性色",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[.5,.5,.5,.5],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=r[0],i=r[1],u=r[2],s=r[3],c={red:"R",green:"G",blue:"B","红色":"R","绿色":"G","蓝色":"B"},f={cyan:"R",magenta:"G",yellow:"B","青色":"R","洋红":"G","黄色":"B"},v=function(e){return c[t]?Math.max(e.R,e.G,e.B)==e[c[t]]:f[t]?Math.min(e.R,e.G,e.B)==e[f[t]]:"black"==t||"黑色"==t?Math.min(e.R,e.G,e.B)<128:"white"==t||"白色"==t?Math.max(e.R,e.G,e.B)>128:"中性色"==t?!(Math.max(e.R,e.G,e.B)<1||Math.min(e.R,e.G,e.B)>224):void 0},l=0,d=[o,i,u,s],h=0,g=e.width;g>h;h++)for(var p=0,m=e.height;m>p;p++)n.dorsyMath.xyCal(e,h,p,function(e,r,n){var o={R:e,G:r,B:n},i=[e,r,n],u=[];if(v(o)){if(c[t]){var h=c[t],g=e+r+n-Math.max(e,r,n)-Math.min(e,r,n);l=o[h]-g}else if(f[t]){var p=f[t],m=e+r+n-Math.max(e,r,n)-Math.min(e,r,n);l=m-o[p]}else if("black"==t||"黑色"==t)l=2*parseInt(127.5-Math.max(e,r,n));else if("white"==t||"白色"==t)l=2*parseInt(Math.min(e,r,n)-127.5);else{if("中性色"!=t)return;l=255-(Math.abs(Math.max(e,r,n)-127.5)+Math.abs(Math.min(e,r,n)-127.5))}for(var y=0;3>y;y++){var b=parseInt(l*(i[y]/255)),M=i[y]-b,x=parseInt(l*(1-i[y]/255)),w=i[y]+x,_=d[y]+s+d[y]*s,P=0;a?(i[y]>128&&(b=x),P=s>0?i[y]-s*b:i[y]-s*x,P>w&&(P=w),M>P&&(P=M),x=w-P,b=P-M,0>s&&(b=x),P-=d[y]>0?d[y]*b:d[y]*x):P=l*-_+i[y],P>w&&(P=w),M>P&&(P=M),u[y]=P}return u}});return e}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setHSI=void 0;var n=r(9);t.setHSI=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:!1,i=arguments[5],u=t/180*Math.PI,s=r/100,c=a/100*255;/[RGBCMY]+/.test(i)||(i="RGBCMY");for(var f=i.split(""),v={},l=0;l<f.length;l++)v[f[l]]=1;return n.dorsyMath.applyInHSI(e,function(e,t){v[t]&&(o?(e.H=u,e.S=s,e.I+=c):(e.H+=u,e.S+=s,e.I+=c))}),e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.cover=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,i=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"RGB",u=e.data,s=t.data;/[RGB]+/.test(i)||(i="RGB");var c=void 0,f=i.replace("R","0").replace("G","1").replace("B","2"),v=e.width,l=e.height,d=t.width,h=t.height,g=[f.indexOf("0")>-1,f.indexOf("1")>-1,f.indexOf("2")>-1],p=a,m=a+d,y=o,b=o+h;if(!(p>v||(0>p&&(p=0),0>m||(m>v&&(m=v),y>l||(0>y&&(y=0),0>b))))){b>l&&(b=l);for(var M=void 0,x=void 0,w=void 0,_=y;b>_;_++){M=_*v,x=_-o,w=x*d;for(var P=p;m>P;P++)for(var I=P-a,O=4*(M+P),j=4*(w+I),B=0;3>B&&0!=s[j+3];B++)switch(u[O+3]=s[j+3],r){case"颜色减淡":g[B]&&(c=u[O+B]+u[O+B]*s[j+B]/(255-s[j+B]),u[O+B]=(1-n)*u[O+B]+n*c);break;case"变暗":g[B]&&(c=u[O+B]<s[j+B]?u[O+B]:s[j+B],u[O+B]=(1-n)*u[O+B]+n*c);break;case"变亮":g[B]&&(c=u[O+B]>s[j+B]?u[O+B]:s[j+B],u[O+B]=(1-n)*u[O+B]+n*c);break;case"正片叠底":g[B]&&(c=~~(u[O+B]*s[j+B]/255),u[O+B]=(1-n)*u[O+B]+n*c);break;case"滤色":g[B]&&(c=~~(255-(255-u[O+B])*(255-s[j+B])/255),u[O+B]=(1-n)*u[O+B]+n*c);break;case"叠加":g[B]&&(c=u[O+B]<=127.5?u[O+B]*s[j+B]/127.5:255-(255-u[O+B])*(255-s[j+B])/127.5,u[O+B]=(1-n)*u[O+B]+n*c);break;case"强光":g[B]&&(c=s[j+B]<=127.5?u[O+B]*s[j+B]/127.5:u[O+B]+(255-u[O+B])*(s[j+B]-127.5)/127.5,u[O+B]=(1-n)*u[O+B]+n*c);break;case"差值":g[B]&&(c=u[O+B]>s[j+B]?u[O+B]-s[j+B]:s[j+B]-u[O+B],u[O+B]=(1-n)*u[O+B]+n*c);break;case"排除":g[B]&&(c=u[O+B]+s[j+B]-u[O+B]*s[j+B]/127.5,u[O+B]=(1-n)*u[O+B]+n*c);break;case"点光":g[B]&&(c=u[O+B]<2*s[j+B]-255?2*s[j+B]-255:u[O+B]<2*s[j+B]?u[O+B]:2*s[j+B],u[O+B]=(1-n)*u[O+B]+n*c);break;case"颜色加深":g[B]&&(c=255-255*(255-u[O+B])/s[j+B],u[O+B]=(1-n)*u[O+B]+n*c);break;case"线性加深":if(g[B]){var G=u[O+B]+s[j+B];c=G>255?G-255:0,u[O+B]=(1-n)*u[O+B]+n*c}break;case"线性减淡":if(g[B]){var C=u[O+B]+s[j+B];c=C>255?255:C,u[O+B]=(1-n)*u[O+B]+n*c}break;case"柔光":g[B]&&(c=s[j+B]<127.5?((2*s[j+B]-255)*(255-u[O+B])/65025+1)*u[O+B]:(2*s[j+B]-255)*(Math.sqrt(u[O+B]/255)-u[O+B]/255)+u[O+B],u[O+B]=(1-n)*u[O+B]+n*c);break;case"亮光":g[B]&&(c=s[j+B]<127.5?255*(1-(255-u[O+B])/(2*s[j+B])):u[O+B]/(2*(1-s[j+B]/255)),u[O+B]=(1-n)*u[O+B]+n*c);break;case"线性光":if(g[B]){var D=u[O+B]+2*s[j+B]-255;c=D>255?255:D,u[O+B]=(1-n)*u[O+B]+n*c}break;case"实色混合":g[B]&&(c=s[j+B]<255-u[O+B]?0:255,u[O+B]=(1-n)*u[O+B]+n*c);break;default:g[B]&&(c=s[j+B],u[O+B]=(1-n)*u[O+B]+n*c)}}return e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ps=void 0;var n=r(33),a=r(6),o=r(31);t.ps=function(e,t){var r=n.clone(e);switch(t){case"美肤":case"softenFace":return a.fix(o.cover(r,a.fix(e,"gaussBlur",8),"滤色"),"brightness",-10,5);case"素描":case"sketch":return a.fix(a.fix(o.cover(e,a.fix(a.fix(r,"toReverse"),"gaussBlur",8),"颜色减淡"),"toGray"),"sharp",1);case"自然增强":case"softEnhancement":return a.fix(e,"curve",[0,190,255],[0,229,255]);case"紫调":case"purpleStyle":return o.cover(e,a.fix(r,"gaussBlur",3),"正片叠底",1,0,0,"RG");case"柔焦":case"soften":return o.cover(e,a.fix(r,"gaussBlur",6),"变暗");case"复古":case"vintage":return o.cover(a.fix(e,"toGray"),a.fix(a.fix(a.fix(n.color2ImageData(e.width,e.height,"#808080"),"noise"),"gaussBlur",4),"色相饱和度",32,19,0,!0),"叠加");case"黑白":case"gray":return a.fix(e,"toGray");case"仿lomo":case"lomo":return a.fix(o.cover(o.cover(r,o.cover(r,r,"滤色"),"柔光"),r,"正常",.2,0,0,"B"),"darkCorner",6,200);case"亮白增强":case"strongEnhancement":return o.cover(r,a.fix(e,"curve",[0,50,255],[0,234,255]),"柔光");case"灰白":case"strongGray":return a.fix(a.fix(e,"toGray"),"curve",[0,61,69,212,255],[0,111,176,237,255]);case"灰色":case"lightGray":return a.fix(a.fix(e,"toGray"),"curve",[0,60,142,194,255],[0,194,240,247,255]);case"暖秋":case"warmAutumn":return o.cover(e,a.fix(a.fix(r,"色相饱和度",36,47,8,!0),"darkCorner",6,150),"叠加");case"木雕":case"carveStyle":return o.cover(e,a.fix(a.fix(a.fix(r,"mosaic"),"borderline"),"embossment"),"线性光");case"粗糙":case"rough":return o.cover(e,a.fix(a.fix(a.fix(n.color2ImageData(e.width,e.height,"#000"),"dotted"),"toReverse"),"embossment"),"叠加");default:throw t+". 该复合处理方法不存在"}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(34);Object.defineProperty(t,"clone",{enumerable:!0,get:function(){return n.clone}});var a=r(35);Object.defineProperty(t,"getImageData",{enumerable:!0,get:function(){return a.getImageData}});var o=r(36);Object.defineProperty(t,"imgData2Base64",{enumerable:!0,get:function(){return o.imgData2Base64}});var i=r(37);Object.defineProperty(t,"color2RGB",{enumerable:!0,get:function(){return i.color2RGB}});var u=r(38);Object.defineProperty(t,"color2ImageData",{enumerable:!0,get:function(){return u.color2ImageData}})},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.clone=function(e){var t=new ImageData(e.width,e.height);return t.data.set(e.data),t}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.getImageData=function(e,t){var r=document.createElement("canvas"),n=r.getContext("2d"),a=new Image;a.onload=function(){r.width=this.width,r.height=this.height,n.drawImage(this,0,0,this.width,this.height),t&&t(n.getImageData(0,0,this.width,this.height))},a.src=e}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.imgData2Base64=function(e){var t=document.createElement("canvas"),r=t.getContext("2d");return t.width=e.width,t.height=e.height,r.putImageData(e,0,0),t.toDataURL()}},function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;t.color2RGB=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#000",t=e.toLowerCase();if(t&&r.test(t)){if(4===t.length){for(var n="#",a=1;4>a;a+=1)n+=t.slice(a,a+1).concat(t.slice(a,a+1));t=n}for(var o=[],i=1;7>i;i+=2)o.push(parseInt("0x"+t.slice(i,i+2)));return o}return t}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}Object.defineProperty(t,"__esModule",{value:!0}),t.color2ImageData=void 0;var a=r(39),o=n(a),i=r(37);t.color2ImageData=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:255,a=i.color2RGB(r),u=e*t,s=[],c=0;u>c;c++)s.push.apply(s,o["default"](a)),s.push(n);return new ImageData(new Uint8ClampedArray(s),e,t)}},function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}t.__esModule=!0;var a=r(40),o=n(a);t["default"]=function(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return o["default"](e)}},function(e,t,r){e.exports={"default":r(41),__esModule:!0}},function(e,t,r){r(42),r(65),e.exports=r(50).Array.from},function(e,t,r){"use strict";var n=r(43)(!0);r(46)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,r=this._i;return r>=t.length?{value:void 0,done:!0}:(e=n(t,r),this._i+=e.length,{value:e,done:!1})})},function(e,t,r){var n=r(44),a=r(45);e.exports=function(e){return function(t,r){var o,i,u=String(a(t)),s=n(r),c=u.length;return 0>s||s>=c?e?"":void 0:(o=u.charCodeAt(s),55296>o||o>56319||s+1===c||(i=u.charCodeAt(s+1))<56320||i>57343?e?u.charAt(s):o:e?u.slice(s,s+2):(o-55296<<10)+(i-56320)+65536)}}},function(e,t){var r=Math.ceil,n=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?n:r)(e)}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t,r){"use strict";var n=r(47),a=r(48),o=r(53),i=r(54),u=r(58),s=r(59),c=r(60),f=r(61),v=r(5).getProto,l=r(62)("iterator"),d=!([].keys&&"next"in[].keys()),h="@@iterator",g="keys",p="values",m=function(){return this};e.exports=function(e,t,r,y,b,M,x){c(r,t,y);var w,_,P=function(e){if(!d&&e in B)return B[e];switch(e){case g:return function(){return new r(this,e)};case p:return function(){return new r(this,e)}}return function(){return new r(this,e)}},I=t+" Iterator",O=b==p,j=!1,B=e.prototype,G=B[l]||B[h]||b&&B[b],C=G||P(b);if(G){var D=v(C.call(new e));f(D,I,!0),!n&&u(B,h)&&i(D,l,m),O&&G.name!==p&&(j=!0,C=function(){return G.call(this)})}if(n&&!x||!d&&!j&&B[l]||i(B,l,C),s[t]=C,s[I]=m,b)if(w={values:O?C:P(p),keys:M?C:P(g),entries:O?P("entries"):C},x)for(_ in w)_ in B||o(B,_,w[_]);else a(a.P+a.F*(d||j),t,w);return w}},function(e,t){e.exports=!0},function(e,t,r){var n=r(49),a=r(50),o=r(51),i="prototype",u=function(e,t,r){var s,c,f,v=e&u.F,l=e&u.G,d=e&u.S,h=e&u.P,g=e&u.B,p=e&u.W,m=l?a:a[t]||(a[t]={}),y=l?n:d?n[t]:(n[t]||{})[i];l&&(r=t);for(s in r)c=!v&&y&&s in y,c&&s in m||(f=c?y[s]:r[s],m[s]=l&&"function"!=typeof y[s]?r[s]:g&&c?o(f,n):p&&y[s]==f?function(e){var t=function(t){return this instanceof e?new e(t):e(t)};return t[i]=e[i],t}(f):h&&"function"==typeof f?o(Function.call,f):f,h&&((m[i]||(m[i]={}))[s]=f))};u.F=1,u.G=2,u.S=4,u.P=8,u.B=16,u.W=32,e.exports=u},function(e,t){var r=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=r)},function(e,t){var r=e.exports={version:"1.2.6"};"number"==typeof __e&&(__e=r)},function(e,t,r){var n=r(52);e.exports=function(e,t,r){if(n(e),void 0===t)return e;switch(r){case 1:return function(r){return e.call(t,r)};case 2:return function(r,n){return e.call(t,r,n)};case 3:return function(r,n,a){return e.call(t,r,n,a)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t,r){e.exports=r(54)},function(e,t,r){var n=r(5),a=r(55);e.exports=r(56)?function(e,t,r){return n.setDesc(e,t,a(1,r))}:function(e,t,r){return e[t]=r,e}},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,r){e.exports=!r(57)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t){e.exports=function(e){try{return!!e()}catch(t){return!0}}},function(e,t){var r={}.hasOwnProperty;e.exports=function(e,t){return r.call(e,t)}},function(e,t){e.exports={}},function(e,t,r){"use strict";var n=r(5),a=r(55),o=r(61),i={};r(54)(i,r(62)("iterator"),function(){return this}),e.exports=function(e,t,r){e.prototype=n.create(i,{next:a(1,r)}),o(e,t+" Iterator")}},function(e,t,r){var n=r(5).setDesc,a=r(58),o=r(62)("toStringTag");e.exports=function(e,t,r){e&&!a(e=r?e:e.prototype,o)&&n(e,o,{configurable:!0,value:t})}},function(e,t,r){var n=r(63)("wks"),a=r(64),o=r(49).Symbol;e.exports=function(e){return n[e]||(n[e]=o&&o[e]||(o||a)("Symbol."+e))}},function(e,t,r){var n=r(49),a="__core-js_shared__",o=n[a]||(n[a]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var r=0,n=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++r+n).toString(36))}},function(e,t,r){"use strict";var n=r(51),a=r(48),o=r(66),i=r(67),u=r(70),s=r(71),c=r(72);a(a.S+a.F*!r(75)(function(e){Array.from(e)}),"Array",{from:function(e){var t,r,a,f,v=o(e),l="function"==typeof this?this:Array,d=arguments,h=d.length,g=h>1?d[1]:void 0,p=void 0!==g,m=0,y=c(v);if(p&&(g=n(g,h>2?d[2]:void 0,2)),void 0==y||l==Array&&u(y))for(t=s(v.length),r=new l(t);t>m;m++)r[m]=p?g(v[m],m):v[m];else for(f=y.call(v),
r=new l;!(a=f.next()).done;m++)r[m]=p?i(f,g,[a.value,m],!0):a.value;return r.length=m,r}})},function(e,t,r){var n=r(45);e.exports=function(e){return Object(n(e))}},function(e,t,r){var n=r(68);e.exports=function(e,t,r,a){try{return a?t(n(r)[0],r[1]):t(r)}catch(o){var i=e["return"];throw void 0!==i&&n(i.call(e)),o}}},function(e,t,r){var n=r(69);e.exports=function(e){if(!n(e))throw TypeError(e+" is not an object!");return e}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t,r){var n=r(59),a=r(62)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(n.Array===e||o[a]===e)}},function(e,t,r){var n=r(44),a=Math.min;e.exports=function(e){return e>0?a(n(e),9007199254740991):0}},function(e,t,r){var n=r(73),a=r(62)("iterator"),o=r(59);e.exports=r(50).getIteratorMethod=function(e){return void 0!=e?e[a]||e["@@iterator"]||o[n(e)]:void 0}},function(e,t,r){var n=r(74),a=r(62)("toStringTag"),o="Arguments"==n(function(){return arguments}());e.exports=function(e){var t,r,i;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(r=(t=Object(e))[a])?r:o?n(t):"Object"==(i=n(t))&&"function"==typeof t.callee?"Arguments":i}},function(e,t){var r={}.toString;e.exports=function(e){return r.call(e).slice(8,-1)}},function(e,t,r){var n=r(62)("iterator"),a=!1;try{var o=[7][n]();o["return"]=function(){a=!0},Array.from(o,function(){throw 2})}catch(i){}e.exports=function(e,t){if(!t&&!a)return!1;var r=!1;try{var o=[7],i=o[n]();i.next=function(){return{done:r=!0}},o[n]=function(){return i},e(o)}catch(u){}return r}}])});